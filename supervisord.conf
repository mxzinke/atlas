[supervisord]
nodaemon=true
logfile=/atlas/logs/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/atlas/logs

[program:init]
command=/atlas/app/init.sh
autorestart=false
startsecs=0
startretries=0
priority=10
stdout_logfile=/atlas/logs/init.log
stderr_logfile=/atlas/logs/init-error.log

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
priority=20
stdout_logfile=/atlas/logs/nginx.log
stderr_logfile=/atlas/logs/nginx-error.log

[program:inbox-mcp]
command=bun run /atlas/app/inbox-mcp/index.ts
autostart=false
autorestart=true
priority=30
stdout_logfile=/atlas/logs/inbox-mcp.log
stderr_logfile=/atlas/logs/inbox-mcp-error.log

[program:web-ui]
command=bun run /atlas/app/web-ui/index.ts
autostart=false
autorestart=true
priority=40
stdout_logfile=/atlas/logs/web-ui.log
stderr_logfile=/atlas/logs/web-ui-error.log

[program:watcher]
command=/atlas/app/watcher.sh
autostart=false
autorestart=true
priority=50
stdout_logfile=/atlas/logs/watcher.log
stderr_logfile=/atlas/logs/watcher-error.log

[program:supercronic]
command=supercronic /atlas/workspace/crontab
autostart=false
autorestart=true
priority=60
stdout_logfile=/atlas/logs/cron.log
stderr_logfile=/atlas/logs/cron-error.log

[program:qmd]
command=qmd mcp --http --port 8181 --daemon --collection /atlas/workspace/memory
autostart=false
autorestart=true
priority=35
stdout_logfile=/atlas/logs/qmd.log
stderr_logfile=/atlas/logs/qmd-error.log
environment=QMD_CACHE_DIR="/atlas/workspace/.qmd-cache"
